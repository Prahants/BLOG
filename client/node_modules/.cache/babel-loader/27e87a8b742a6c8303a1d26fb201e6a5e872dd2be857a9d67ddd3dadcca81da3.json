{"ast":null,"code":"import React, { forwardRef, useRef, useMemo, useEffect } from 'react';\nimport Editor, { Quill } from 'react-quill';\nimport 'quill-mention';\nimport { useComponentDefaultProps, Box } from '@mantine/core';\nimport { useId, mergeRefs } from '@mantine/hooks';\nimport { Toolbar } from '../Toolbar/Toolbar.js';\nimport { DEFAULT_CONTROLS } from './default-control.js';\nexport { DEFAULT_CONTROLS } from './default-control.js';\nimport useStyles from './RichTextEditor.styles.js';\nimport { DEFAULT_LABELS } from './default-labels.js';\nexport { DEFAULT_LABELS } from './default-labels.js';\nimport { createImageBlot } from '../../modules/image-uploader/ImageBlot.js';\nimport { ImageUploader } from '../../modules/image-uploader/ImageUploader.js';\nimport { replaceIcons } from '../../modules/icons/replace-icons.js';\nimport { attachShortcuts } from '../../modules/shortcuts/attach-shortcuts.js';\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\nconst InlineBlot = Quill.import(\"blots/block\");\nconst ImageBlot = createImageBlot(InlineBlot);\nQuill.register({\n  \"formats/imageBlot\": ImageBlot\n});\nQuill.register(\"modules/imageUploader\", ImageUploader);\nconst icons = Quill.import(\"ui/icons\");\nreplaceIcons(icons);\nfunction defaultImageUpload(file) {\n  return new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result);\n    reader.readAsDataURL(file);\n  });\n}\nconst defaultProps = {\n  onImageUpload: defaultImageUpload,\n  sticky: true,\n  stickyOffset: 0,\n  labels: DEFAULT_LABELS,\n  controls: DEFAULT_CONTROLS,\n  readOnly: false\n};\nconst RichTextEditor = forwardRef((props, ref) => {\n  const _a = useComponentDefaultProps(\"RichTextEditor\", defaultProps, props),\n    {\n      value,\n      defaultValue,\n      onChange,\n      onImageUpload,\n      sticky,\n      stickyOffset,\n      radius,\n      labels,\n      controls,\n      id,\n      className,\n      classNames,\n      styles,\n      placeholder,\n      mentions,\n      readOnly,\n      modules: externalModules,\n      unstyled,\n      formats\n    } = _a,\n    others = __objRest(_a, [\"value\", \"defaultValue\", \"onChange\", \"onImageUpload\", \"sticky\", \"stickyOffset\", \"radius\", \"labels\", \"controls\", \"id\", \"className\", \"classNames\", \"styles\", \"placeholder\", \"mentions\", \"readOnly\", \"modules\", \"unstyled\", \"formats\"]);\n  const uuid = useId(id);\n  const editorRef = useRef();\n  const {\n    classes,\n    cx\n  } = useStyles({\n    saveLabel: labels.save,\n    editLabel: labels.edit,\n    removeLabel: labels.remove,\n    radius,\n    readOnly\n  }, {\n    classNames,\n    styles,\n    unstyled,\n    name: \"RichTextEditor\"\n  });\n  const modules = useMemo(() => __spreadProps(__spreadValues(__spreadValues({}, externalModules), uuid ? {\n    toolbar: {\n      container: `#${uuid}`\n    }\n  } : void 0), {\n    mention: mentions,\n    imageUploader: {\n      upload: file => onImageUpload(file)\n    }\n  }), [uuid, mentions, externalModules, onImageUpload]);\n  useEffect(() => {\n    var _a2, _b;\n    if (editorRef.current) {\n      attachShortcuts((_b = (_a2 = editorRef == null ? void 0 : editorRef.current) == null ? void 0 : _a2.editor) == null ? void 0 : _b.keyboard);\n    }\n  }, []);\n  return /* @__PURE__ */React.createElement(Box, __spreadValues({\n    className: cx(classes.root, className)\n  }, others), /* @__PURE__ */React.createElement(Toolbar, {\n    controls,\n    labels,\n    sticky,\n    stickyOffset,\n    classNames,\n    styles,\n    id: uuid,\n    className: classes.toolbar,\n    unstyled\n  }), /* @__PURE__ */React.createElement(Editor, {\n    theme: \"snow\",\n    modules,\n    value,\n    defaultValue,\n    onChange,\n    ref: mergeRefs(editorRef, ref),\n    placeholder,\n    readOnly,\n    scrollingContainer: \"html\",\n    formats\n  }));\n});\nRichTextEditor.displayName = \"@mantine/rte/RichTextEditor\";\nexport { RichTextEditor };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__objRest","source","exclude","target","indexOf","InlineBlot","Quill","import","ImageBlot","createImageBlot","register","ImageUploader","icons","replaceIcons","defaultImageUpload","file","Promise","resolve","reader","FileReader","onloadend","result","readAsDataURL","defaultProps","onImageUpload","sticky","stickyOffset","labels","DEFAULT_LABELS","controls","DEFAULT_CONTROLS","readOnly","RichTextEditor","forwardRef","props","ref","_a","useComponentDefaultProps","defaultValue","onChange","radius","id","className","classNames","styles","placeholder","mentions","modules","externalModules","unstyled","formats","others","uuid","useId","editorRef","useRef","classes","cx","useStyles","saveLabel","save","editLabel","edit","removeLabel","remove","name","useMemo","toolbar","container","mention","imageUploader","upload","useEffect","_a2","_b","current","attachShortcuts","editor","keyboard","React","createElement","Box","root","Toolbar","Editor","theme","mergeRefs","scrollingContainer","displayName"],"sources":["/Users/prashant/Desktop/blog/node_modules/@mantine/rte/src/components/RichTextEditor/RichTextEditor.tsx"],"sourcesContent":["import React, { useMemo, useRef, useEffect, forwardRef } from 'react';\nimport Editor, { Quill } from 'react-quill';\nimport type { Delta, Sources } from 'quill';\nimport 'quill-mention';\nimport {\n  DefaultProps,\n  Selectors,\n  Box,\n  MantineNumberSize,\n  useComponentDefaultProps,\n} from '@mantine/core';\nimport { useId, mergeRefs } from '@mantine/hooks';\nimport { Toolbar, ToolbarStylesNames } from '../Toolbar/Toolbar';\nimport { DEFAULT_CONTROLS } from './default-control';\nimport useStyles from './RichTextEditor.styles';\nimport { DEFAULT_LABELS, RichTextEditorLabels } from './default-labels';\nimport { ToolbarControl } from '../Toolbar/controls';\nimport { createImageBlot, ImageUploader } from '../../modules/image-uploader';\nimport { replaceIcons } from '../../modules/icons';\nimport { attachShortcuts } from '../../modules/shortcuts';\n\nexport type RichTextEditorStylesNames = ToolbarStylesNames | Selectors<typeof useStyles>;\n\nexport type { RichTextEditorLabels };\n\nexport { DEFAULT_LABELS, DEFAULT_CONTROLS };\n\nconst InlineBlot = Quill.import('blots/block');\nconst ImageBlot = createImageBlot(InlineBlot);\nQuill.register({ 'formats/imageBlot': ImageBlot });\nQuill.register('modules/imageUploader', ImageUploader);\n\nconst icons = Quill.import('ui/icons');\nreplaceIcons(icons);\n\nfunction defaultImageUpload(file: File): Promise<string> {\n  return new Promise((resolve) => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result as string);\n    reader.readAsDataURL(file);\n  });\n}\n\nexport interface RichTextEditorProps\n  extends DefaultProps<RichTextEditorStylesNames>,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'onChange' | 'defaultValue'> {\n  /** HTML content, value not forced as quill works in uncontrolled mode */\n  value?: string | Delta;\n\n  /** Initial value of input */\n  defaultValue?: string | Delta;\n\n  /** Called each time value changes */\n  onChange?(value: string, delta: Delta, sources: Sources, editor: Editor.UnprivilegedEditor): void;\n\n  /** Called when image image is inserted in editor */\n  onImageUpload?(image: File): Promise<string>;\n\n  /** Labels used in toolbar button titles and assets insertion popovers */\n  labels?: RichTextEditorLabels;\n\n  /** Toolbar controls divided into groups */\n  controls?: ToolbarControl[][];\n\n  /** Make toolbar sticky */\n  sticky?: boolean;\n\n  /** Quill mentions plugin setting */\n  mentions?: Record<string, any>;\n\n  /** Top toolbar position in any valid css value */\n  stickyOffset?: number | string;\n\n  /** Radius from theme.radius, or number to set border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Make quill editor read only */\n  readOnly?: boolean;\n\n  /** Extra modules for react-quill */\n  modules?: Record<string, any>;\n\n  /** List of formats that should be supported by the editor */\n  formats?: string[];\n}\n\nconst defaultProps: Partial<RichTextEditorProps> = {\n  onImageUpload: defaultImageUpload,\n  sticky: true,\n  stickyOffset: 0,\n  labels: DEFAULT_LABELS,\n  controls: DEFAULT_CONTROLS,\n  readOnly: false,\n};\n\nexport const RichTextEditor = forwardRef<Editor, RichTextEditorProps>(\n  (props: RichTextEditorProps, ref) => {\n    const {\n      value,\n      defaultValue,\n      onChange,\n      onImageUpload,\n      sticky,\n      stickyOffset,\n      radius,\n      labels,\n      controls,\n      id,\n      className,\n      classNames,\n      styles,\n      placeholder,\n      mentions,\n      readOnly,\n      modules: externalModules,\n      unstyled,\n      formats,\n      ...others\n    } = useComponentDefaultProps('RichTextEditor', defaultProps, props);\n\n    const uuid = useId(id);\n    const editorRef = useRef<Editor>();\n    const { classes, cx } = useStyles(\n      {\n        saveLabel: labels.save,\n        editLabel: labels.edit,\n        removeLabel: labels.remove,\n        radius,\n        readOnly,\n      },\n      { classNames, styles, unstyled, name: 'RichTextEditor' }\n    );\n\n    const modules = useMemo(\n      () => ({\n        ...externalModules,\n        ...(uuid ? { toolbar: { container: `#${uuid}` } } : undefined),\n        mention: mentions,\n        imageUploader: {\n          upload: (file: File) => onImageUpload(file),\n        },\n      }),\n      [uuid, mentions, externalModules, onImageUpload]\n    );\n\n    useEffect(() => {\n      if (editorRef.current) {\n        attachShortcuts(editorRef?.current?.editor?.keyboard);\n      }\n    }, []);\n\n    return (\n      <Box className={cx(classes.root, className)} {...others}>\n        <Toolbar\n          controls={controls}\n          labels={labels}\n          sticky={sticky}\n          stickyOffset={stickyOffset}\n          classNames={classNames}\n          styles={styles}\n          id={uuid}\n          className={classes.toolbar}\n          unstyled={unstyled}\n        />\n\n        <Editor\n          theme=\"snow\"\n          modules={modules}\n          value={value}\n          defaultValue={defaultValue}\n          onChange={onChange}\n          ref={mergeRefs(editorRef, ref)}\n          placeholder={placeholder}\n          readOnly={readOnly}\n          scrollingContainer=\"html\"\n          formats={formats}\n        />\n      </Box>\n    );\n  }\n);\n\nRichTextEditor.displayName = '@mantine/rte/RichTextEditor';\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}