{"ast":null,"code":"import Quill from 'quill';\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function () {};\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nvar Keys = {\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  UP: 38,\n  DOWN: 40\n};\nfunction attachDataValues(element, data, dataAttributes) {\n  var mention = element;\n  Object.keys(data).forEach(function (key) {\n    if (dataAttributes.indexOf(key) > -1) {\n      mention.dataset[key] = data[key];\n    } else {\n      delete mention.dataset[key];\n    }\n  });\n  return mention;\n}\nfunction getMentionCharIndex(text, mentionDenotationChars, isolateChar, allowInlineMentionChar) {\n  return mentionDenotationChars.reduce(function (prev, mentionChar) {\n    var mentionCharIndex;\n    if (isolateChar && allowInlineMentionChar) {\n      var regex = new RegExp(\"^\".concat(mentionChar, \"|\\\\s\").concat(mentionChar), 'g');\n      var lastMatch = (text.match(regex) || []).pop();\n      if (!lastMatch) {\n        return {\n          mentionChar: prev.mentionChar,\n          mentionCharIndex: prev.mentionCharIndex\n        };\n      }\n      mentionCharIndex = lastMatch !== mentionChar ? text.lastIndexOf(lastMatch) + lastMatch.length - mentionChar.length : 0;\n    } else {\n      mentionCharIndex = text.lastIndexOf(mentionChar);\n    }\n    if (mentionCharIndex > prev.mentionCharIndex) {\n      return {\n        mentionChar: mentionChar,\n        mentionCharIndex: mentionCharIndex\n      };\n    }\n    return {\n      mentionChar: prev.mentionChar,\n      mentionCharIndex: prev.mentionCharIndex\n    };\n  }, {\n    mentionChar: null,\n    mentionCharIndex: -1\n  });\n}\nfunction hasValidChars(text, allowedChars) {\n  return allowedChars.test(text);\n}\nfunction hasValidMentionCharIndex(mentionCharIndex, text, isolateChar, textPrefix) {\n  if (mentionCharIndex === -1) {\n    return false;\n  }\n  if (!isolateChar) {\n    return true;\n  }\n  var mentionPrefix = mentionCharIndex ? text[mentionCharIndex - 1] : textPrefix;\n  return !mentionPrefix || !!mentionPrefix.match(/\\s/);\n}\nvar Embed = Quill[\"import\"](\"blots/embed\");\nvar MentionBlot = /*#__PURE__*/function (_Embed) {\n  _inherits(MentionBlot, _Embed);\n  var _super = _createSuper(MentionBlot);\n  function MentionBlot(scroll, node) {\n    var _this;\n    _classCallCheck(this, MentionBlot);\n    _this = _super.call(this, scroll, node);\n    _defineProperty(_assertThisInitialized(_this), \"hoverHandler\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"hoverHandler\", void 0);\n    _this.clickHandler = null;\n    _this.hoverHandler = null;\n    _this.mounted = false;\n    return _this;\n  }\n  _createClass(MentionBlot, [{\n    key: \"attach\",\n    value: function attach() {\n      _get(_getPrototypeOf(MentionBlot.prototype), \"attach\", this).call(this);\n      if (!this.mounted) {\n        this.mounted = true;\n        this.clickHandler = this.getClickHandler();\n        this.hoverHandler = this.getHoverHandler();\n        this.domNode.addEventListener(\"click\", this.clickHandler, false);\n        this.domNode.addEventListener(\"mouseenter\", this.hoverHandler, false);\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      _get(_getPrototypeOf(MentionBlot.prototype), \"detach\", this).call(this);\n      this.mounted = false;\n      if (this.clickHandler) {\n        this.domNode.removeEventListener(\"click\", this.clickHandler);\n        this.clickHandler = null;\n      }\n    }\n  }, {\n    key: \"getClickHandler\",\n    value: function getClickHandler() {\n      var _this2 = this;\n      return function (e) {\n        var event = _this2.buildEvent(\"mention-clicked\", e);\n        window.dispatchEvent(event);\n        e.preventDefault();\n      };\n    }\n  }, {\n    key: \"getHoverHandler\",\n    value: function getHoverHandler() {\n      var _this3 = this;\n      return function (e) {\n        var event = _this3.buildEvent('mention-hovered', e);\n        window.dispatchEvent(event);\n        e.preventDefault();\n      };\n    }\n  }, {\n    key: \"buildEvent\",\n    value: function buildEvent(name, e) {\n      var event = new Event(name, {\n        bubbles: true,\n        cancelable: true\n      });\n      event.value = _extends({}, this.domNode.dataset);\n      event.event = e;\n      return event;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(data) {\n      var node = _get(_getPrototypeOf(MentionBlot), \"create\", this).call(this);\n      var denotationChar = document.createElement(\"span\");\n      denotationChar.className = \"ql-mention-denotation-char\";\n      denotationChar.innerHTML = data.denotationChar;\n      node.appendChild(denotationChar);\n      node.innerHTML += data.value;\n      return MentionBlot.setDataValues(node, data);\n    }\n  }, {\n    key: \"setDataValues\",\n    value: function setDataValues(element, data) {\n      var domNode = element;\n      Object.keys(data).forEach(function (key) {\n        domNode.dataset[key] = data[key];\n      });\n      return domNode;\n    }\n  }, {\n    key: \"value\",\n    value: function value(domNode) {\n      return domNode.dataset;\n    }\n  }]);\n  return MentionBlot;\n}(Embed);\nMentionBlot.blotName = \"mention\";\nMentionBlot.tagName = \"span\";\nMentionBlot.className = \"mention\";\nQuill.register(MentionBlot);\nvar Mention = /*#__PURE__*/function () {\n  function Mention(quill, options) {\n    var _this = this;\n    _classCallCheck(this, Mention);\n    this.isOpen = false;\n    this.itemIndex = 0;\n    this.mentionCharPos = null;\n    this.cursorPos = null;\n    this.values = [];\n    this.suspendMouseEnter = false; //this token is an object that may contains one key \"abandoned\", set to\n    //true when the previous source call should be ignored in favor or a\n    //more recent execution.  This token will be null unless a source call\n    //is in progress.\n\n    this.existingSourceExecutionToken = null;\n    this.quill = quill;\n    this.options = {\n      source: null,\n      renderItem: function renderItem(item) {\n        return \"\".concat(item.value);\n      },\n      renderLoading: function renderLoading() {\n        return null;\n      },\n      onSelect: function onSelect(item, insertItem) {\n        insertItem(item);\n      },\n      mentionDenotationChars: [\"@\"],\n      showDenotationChar: true,\n      allowedChars: /^[a-zA-Z0-9_]*$/,\n      minChars: 0,\n      maxChars: 31,\n      offsetTop: 2,\n      offsetLeft: 0,\n      isolateCharacter: false,\n      allowInlineMentionChar: false,\n      fixMentionsToQuill: false,\n      positioningStrategy: \"normal\",\n      defaultMenuOrientation: \"bottom\",\n      blotName: \"mention\",\n      dataAttributes: [\"id\", \"value\", \"denotationChar\", \"link\", \"target\", \"disabled\"],\n      linkTarget: \"_blank\",\n      onOpen: function onOpen() {\n        return true;\n      },\n      onBeforeClose: function onBeforeClose() {\n        return true;\n      },\n      onClose: function onClose() {\n        return true;\n      },\n      // Style options\n      listItemClass: \"ql-mention-list-item\",\n      mentionContainerClass: \"ql-mention-list-container\",\n      mentionListClass: \"ql-mention-list\",\n      spaceAfterInsert: true,\n      selectKeys: [Keys.ENTER]\n    };\n    _extends(this.options, options, {\n      dataAttributes: Array.isArray(options.dataAttributes) ? this.options.dataAttributes.concat(options.dataAttributes) : this.options.dataAttributes\n    }); //Bind all option-functions so they have a reasonable context\n\n    for (var o in this.options) {\n      if (typeof this.options[o] === 'function') {\n        this.options[o] = this.options[o].bind(this);\n      }\n    } //create mention container\n\n    this.mentionContainer = document.createElement(\"div\");\n    this.mentionContainer.className = this.options.mentionContainerClass ? this.options.mentionContainerClass : \"\";\n    this.mentionContainer.style.cssText = \"display: none; position: absolute;\";\n    this.mentionContainer.onmousemove = this.onContainerMouseMove.bind(this);\n    if (this.options.fixMentionsToQuill) {\n      this.mentionContainer.style.width = \"auto\";\n    }\n    this.mentionList = document.createElement(\"ul\");\n    this.mentionList.id = 'quill-mention-list';\n    quill.root.setAttribute('aria-owns', 'quill-mention-list');\n    this.mentionList.className = this.options.mentionListClass ? this.options.mentionListClass : \"\";\n    this.mentionContainer.appendChild(this.mentionList);\n    quill.on(\"text-change\", this.onTextChange.bind(this));\n    quill.on(\"selection-change\", this.onSelectionChange.bind(this)); //Pasting doesn't fire selection-change after the pasted text is\n    //inserted, so here we manually trigger one\n\n    quill.container.addEventListener(\"paste\", function () {\n      setTimeout(function () {\n        var range = quill.getSelection();\n        _this.onSelectionChange(range);\n      });\n    });\n    quill.keyboard.addBinding({\n      key: Keys.TAB\n    }, this.selectHandler.bind(this));\n    quill.keyboard.bindings[Keys.TAB].unshift(quill.keyboard.bindings[Keys.TAB].pop());\n    var _iterator = _createForOfIteratorHelper(this.options.selectKeys),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var selectKey = _step.value;\n        quill.keyboard.addBinding({\n          key: selectKey\n        }, this.selectHandler.bind(this));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    quill.keyboard.bindings[Keys.ENTER].unshift(quill.keyboard.bindings[Keys.ENTER].pop());\n    quill.keyboard.addBinding({\n      key: Keys.ESCAPE\n    }, this.escapeHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.UP\n    }, this.upHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.DOWN\n    }, this.downHandler.bind(this));\n  }\n  _createClass(Mention, [{\n    key: \"selectHandler\",\n    value: function selectHandler() {\n      if (this.isOpen && !this.existingSourceExecutionToken) {\n        this.selectItem();\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"escapeHandler\",\n    value: function escapeHandler() {\n      if (this.isOpen) {\n        if (this.existingSourceExecutionToken) {\n          this.existingSourceExecutionToken.abandoned = true;\n        }\n        this.hideMentionList();\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"upHandler\",\n    value: function upHandler() {\n      if (this.isOpen && !this.existingSourceExecutionToken) {\n        this.prevItem();\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"downHandler\",\n    value: function downHandler() {\n      if (this.isOpen && !this.existingSourceExecutionToken) {\n        this.nextItem();\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"showMentionList\",\n    value: function showMentionList() {\n      if (this.options.positioningStrategy === \"fixed\") {\n        document.body.appendChild(this.mentionContainer);\n      } else {\n        this.quill.container.appendChild(this.mentionContainer);\n      }\n      this.mentionContainer.style.visibility = \"hidden\";\n      this.mentionContainer.style.display = \"\";\n      this.mentionContainer.scrollTop = 0;\n      this.setMentionContainerPosition();\n      this.setIsOpen(true);\n    }\n  }, {\n    key: \"hideMentionList\",\n    value: function hideMentionList() {\n      this.options.onBeforeClose();\n      this.mentionContainer.style.display = \"none\";\n      this.mentionContainer.remove();\n      this.setIsOpen(false);\n      this.quill.root.removeAttribute('aria-activedescendant');\n    }\n  }, {\n    key: \"highlightItem\",\n    value: function highlightItem() {\n      var scrollItemInView = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      for (var i = 0; i < this.mentionList.childNodes.length; i += 1) {\n        this.mentionList.childNodes[i].classList.remove(\"selected\");\n      }\n      if (this.itemIndex === -1 || this.mentionList.childNodes[this.itemIndex].dataset.disabled === \"true\") {\n        return;\n      }\n      this.mentionList.childNodes[this.itemIndex].classList.add(\"selected\");\n      this.quill.root.setAttribute('aria-activedescendant', this.mentionList.childNodes[this.itemIndex].id);\n      if (scrollItemInView) {\n        var itemHeight = this.mentionList.childNodes[this.itemIndex].offsetHeight;\n        var itemPos = this.mentionList.childNodes[this.itemIndex].offsetTop;\n        var containerTop = this.mentionContainer.scrollTop;\n        var containerBottom = containerTop + this.mentionContainer.offsetHeight;\n        if (itemPos < containerTop) {\n          // Scroll up if the item is above the top of the container\n          this.mentionContainer.scrollTop = itemPos;\n        } else if (itemPos > containerBottom - itemHeight) {\n          // scroll down if any part of the element is below the bottom of the container\n          this.mentionContainer.scrollTop += itemPos - containerBottom + itemHeight;\n        }\n      }\n    }\n  }, {\n    key: \"getItemData\",\n    value: function getItemData() {\n      var link = this.mentionList.childNodes[this.itemIndex].dataset.link;\n      var hasLinkValue = typeof link !== \"undefined\";\n      var itemTarget = this.mentionList.childNodes[this.itemIndex].dataset.target;\n      if (hasLinkValue) {\n        this.mentionList.childNodes[this.itemIndex].dataset.value = \"<a href=\\\"\".concat(link, \"\\\" target=\").concat(itemTarget || this.options.linkTarget, \">\").concat(this.mentionList.childNodes[this.itemIndex].dataset.value);\n      }\n      return this.mentionList.childNodes[this.itemIndex].dataset;\n    }\n  }, {\n    key: \"onContainerMouseMove\",\n    value: function onContainerMouseMove() {\n      this.suspendMouseEnter = false;\n    }\n  }, {\n    key: \"selectItem\",\n    value: function selectItem() {\n      var _this2 = this;\n      if (this.itemIndex === -1) {\n        return;\n      }\n      var data = this.getItemData();\n      if (data.disabled) {\n        return;\n      }\n      this.options.onSelect(data, function (asyncData) {\n        var programmaticInsert = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var overriddenOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return _this2.insertItem(asyncData, programmaticInsert, overriddenOptions);\n      });\n      this.hideMentionList();\n    }\n  }, {\n    key: \"insertItem\",\n    value: function insertItem(data, programmaticInsert) {\n      var overriddenOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var render = data;\n      if (render === null) {\n        return;\n      }\n      var options = _objectSpread2(_objectSpread2({}, this.options), overriddenOptions);\n      if (!options.showDenotationChar) {\n        render.denotationChar = \"\";\n      }\n      var insertAtPos;\n      if (!programmaticInsert) {\n        insertAtPos = this.mentionCharPos;\n        this.quill.deleteText(this.mentionCharPos, this.cursorPos - this.mentionCharPos, Quill.sources.USER);\n      } else {\n        insertAtPos = this.cursorPos;\n      }\n      var delta = this.quill.insertEmbed(insertAtPos, options.blotName, render, Quill.sources.USER);\n      if (options.spaceAfterInsert) {\n        this.quill.insertText(insertAtPos + 1, \" \", Quill.sources.USER); // setSelection here sets cursor position\n\n        this.quill.setSelection(insertAtPos + 2, Quill.sources.USER);\n      } else {\n        this.quill.setSelection(insertAtPos + 1, Quill.sources.USER);\n      }\n      this.hideMentionList();\n      return delta;\n    }\n  }, {\n    key: \"onItemMouseEnter\",\n    value: function onItemMouseEnter(e) {\n      if (this.suspendMouseEnter) {\n        return;\n      }\n      var index = Number(e.target.dataset.index);\n      if (!Number.isNaN(index) && index !== this.itemIndex) {\n        this.itemIndex = index;\n        this.highlightItem(false);\n      }\n    }\n  }, {\n    key: \"onDisabledItemMouseEnter\",\n    value: function onDisabledItemMouseEnter(e) {\n      if (this.suspendMouseEnter) {\n        return;\n      }\n      this.itemIndex = -1;\n      this.highlightItem(false);\n    }\n  }, {\n    key: \"onItemClick\",\n    value: function onItemClick(e) {\n      if (e.button !== 0) {\n        return;\n      }\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      this.itemIndex = e.currentTarget.dataset.index;\n      this.highlightItem();\n      this.selectItem();\n    }\n  }, {\n    key: \"onItemMouseDown\",\n    value: function onItemMouseDown(e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    }\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      var renderedLoading = this.options.renderLoading();\n      if (!renderedLoading) {\n        return;\n      }\n      if (this.mentionContainer.getElementsByClassName(\"ql-mention-loading\").length > 0) {\n        this.showMentionList();\n        return;\n      }\n      this.mentionList.innerHTML = \"\";\n      var loadingDiv = document.createElement(\"div\");\n      loadingDiv.className = \"ql-mention-loading\";\n      loadingDiv.innerHTML = this.options.renderLoading();\n      this.mentionContainer.append(loadingDiv);\n      this.showMentionList();\n    }\n  }, {\n    key: \"removeLoading\",\n    value: function removeLoading() {\n      var loadingDiv = this.mentionContainer.getElementsByClassName(\"ql-mention-loading\");\n      if (loadingDiv.length > 0) {\n        loadingDiv[0].remove();\n      }\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList(mentionChar, data, searchTerm) {\n      if (data && data.length > 0) {\n        this.removeLoading();\n        this.values = data;\n        this.mentionList.innerHTML = \"\";\n        var initialSelection = -1;\n        for (var i = 0; i < data.length; i += 1) {\n          var li = document.createElement(\"li\");\n          li.id = 'quill-mention-item-' + i;\n          li.className = this.options.listItemClass ? this.options.listItemClass : \"\";\n          if (data[i].disabled) {\n            li.className += \" disabled\";\n            li.setAttribute('aria-hidden', 'true');\n          } else if (initialSelection === -1) {\n            initialSelection = i;\n          }\n          li.dataset.index = i;\n          li.innerHTML = this.options.renderItem(data[i], searchTerm);\n          if (!data[i].disabled) {\n            li.onmouseenter = this.onItemMouseEnter.bind(this);\n            li.onmouseup = this.onItemClick.bind(this);\n            li.onmousedown = this.onItemMouseDown.bind(this);\n          } else {\n            li.onmouseenter = this.onDisabledItemMouseEnter.bind(this);\n          }\n          li.dataset.denotationChar = mentionChar;\n          this.mentionList.appendChild(attachDataValues(li, data[i], this.options.dataAttributes));\n        }\n        this.itemIndex = initialSelection;\n        this.highlightItem();\n        this.showMentionList();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"nextItem\",\n    value: function nextItem() {\n      var increment = 0;\n      var newIndex;\n      do {\n        increment++;\n        newIndex = (this.itemIndex + increment) % this.values.length;\n        var disabled = this.mentionList.childNodes[newIndex].dataset.disabled === \"true\";\n        if (increment === this.values.length + 1) {\n          //we've wrapped around w/o finding an enabled item\n          newIndex = -1;\n          break;\n        }\n      } while (disabled);\n      this.itemIndex = newIndex;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"prevItem\",\n    value: function prevItem() {\n      var decrement = 0;\n      var newIndex;\n      do {\n        decrement++;\n        newIndex = (this.itemIndex + this.values.length - decrement) % this.values.length;\n        var disabled = this.mentionList.childNodes[newIndex].dataset.disabled === \"true\";\n        if (decrement === this.values.length + 1) {\n          //we've wrapped around w/o finding an enabled item\n          newIndex = -1;\n          break;\n        }\n      } while (disabled);\n      this.itemIndex = newIndex;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"containerBottomIsNotVisible\",\n    value: function containerBottomIsNotVisible(topPos, containerPos) {\n      var mentionContainerBottom = topPos + this.mentionContainer.offsetHeight + containerPos.top;\n      return mentionContainerBottom > window.pageYOffset + window.innerHeight;\n    }\n  }, {\n    key: \"containerRightIsNotVisible\",\n    value: function containerRightIsNotVisible(leftPos, containerPos) {\n      if (this.options.fixMentionsToQuill) {\n        return false;\n      }\n      var rightPos = leftPos + this.mentionContainer.offsetWidth + containerPos.left;\n      var browserWidth = window.pageXOffset + document.documentElement.clientWidth;\n      return rightPos > browserWidth;\n    }\n  }, {\n    key: \"setIsOpen\",\n    value: function setIsOpen(isOpen) {\n      if (this.isOpen !== isOpen) {\n        if (isOpen) {\n          this.options.onOpen();\n        } else {\n          this.options.onClose();\n        }\n        this.isOpen = isOpen;\n      }\n    }\n  }, {\n    key: \"setMentionContainerPosition\",\n    value: function setMentionContainerPosition() {\n      if (this.options.positioningStrategy === \"fixed\") {\n        this.setMentionContainerPosition_Fixed();\n      } else {\n        this.setMentionContainerPosition_Normal();\n      }\n    }\n  }, {\n    key: \"setMentionContainerPosition_Normal\",\n    value: function setMentionContainerPosition_Normal() {\n      var _this3 = this;\n      var containerPos = this.quill.container.getBoundingClientRect();\n      var mentionCharPos = this.quill.getBounds(this.mentionCharPos);\n      var containerHeight = this.mentionContainer.offsetHeight;\n      var topPos = this.options.offsetTop;\n      var leftPos = this.options.offsetLeft; // handle horizontal positioning\n\n      if (this.options.fixMentionsToQuill) {\n        var rightPos = 0;\n        this.mentionContainer.style.right = \"\".concat(rightPos, \"px\");\n      } else {\n        leftPos += mentionCharPos.left;\n      }\n      if (this.containerRightIsNotVisible(leftPos, containerPos)) {\n        var containerWidth = this.mentionContainer.offsetWidth + this.options.offsetLeft;\n        var quillWidth = containerPos.width;\n        leftPos = quillWidth - containerWidth;\n      } // handle vertical positioning\n\n      if (this.options.defaultMenuOrientation === \"top\") {\n        // Attempt to align the mention container with the top of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos = -1 * (containerHeight + this.options.offsetTop);\n        } else {\n          topPos = mentionCharPos.top - (containerHeight + this.options.offsetTop);\n        } // default to bottom if the top is not visible\n\n        if (topPos + containerPos.top <= 0) {\n          var overMentionCharPos = this.options.offsetTop;\n          if (this.options.fixMentionsToQuill) {\n            overMentionCharPos += containerPos.height;\n          } else {\n            overMentionCharPos += mentionCharPos.bottom;\n          }\n          topPos = overMentionCharPos;\n        }\n      } else {\n        // Attempt to align the mention container with the bottom of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos += containerPos.height;\n        } else {\n          topPos += mentionCharPos.bottom;\n        } // default to the top if the bottom is not visible\n\n        if (this.containerBottomIsNotVisible(topPos, containerPos)) {\n          var _overMentionCharPos = this.options.offsetTop * -1;\n          if (!this.options.fixMentionsToQuill) {\n            _overMentionCharPos += mentionCharPos.top;\n          }\n          topPos = _overMentionCharPos - containerHeight;\n        }\n      }\n      if (topPos >= 0) {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this3.mentionContainer.classList.add(\"\".concat(className, \"-bottom\"));\n          _this3.mentionContainer.classList.remove(\"\".concat(className, \"-top\"));\n        });\n      } else {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this3.mentionContainer.classList.add(\"\".concat(className, \"-top\"));\n          _this3.mentionContainer.classList.remove(\"\".concat(className, \"-bottom\"));\n        });\n      }\n      this.mentionContainer.style.top = \"\".concat(topPos, \"px\");\n      this.mentionContainer.style.left = \"\".concat(leftPos, \"px\");\n      this.mentionContainer.style.visibility = \"visible\";\n    }\n  }, {\n    key: \"setMentionContainerPosition_Fixed\",\n    value: function setMentionContainerPosition_Fixed() {\n      var _this4 = this;\n      this.mentionContainer.style.position = \"fixed\";\n      this.mentionContainer.style.height = null;\n      var containerPos = this.quill.container.getBoundingClientRect();\n      var mentionCharPos = this.quill.getBounds(this.mentionCharPos);\n      var mentionCharPosAbsolute = {\n        left: containerPos.left + mentionCharPos.left,\n        top: containerPos.top + mentionCharPos.top,\n        width: 0,\n        height: mentionCharPos.height\n      }; //Which rectangle should it be relative to\n\n      var relativeToPos = this.options.fixMentionsToQuill ? containerPos : mentionCharPosAbsolute;\n      var topPos = this.options.offsetTop;\n      var leftPos = this.options.offsetLeft; // handle horizontal positioning\n\n      if (this.options.fixMentionsToQuill) {\n        var rightPos = relativeToPos.right;\n        this.mentionContainer.style.right = \"\".concat(rightPos, \"px\");\n      } else {\n        leftPos += relativeToPos.left; //if its off the righ edge, push it back\n\n        if (leftPos + this.mentionContainer.offsetWidth > document.documentElement.clientWidth) {\n          leftPos -= leftPos + this.mentionContainer.offsetWidth - document.documentElement.clientWidth;\n        }\n      }\n      var availableSpaceTop = relativeToPos.top;\n      var availableSpaceBottom = document.documentElement.clientHeight - (relativeToPos.top + relativeToPos.height);\n      var fitsBottom = this.mentionContainer.offsetHeight <= availableSpaceBottom;\n      var fitsTop = this.mentionContainer.offsetHeight <= availableSpaceTop;\n      var placement;\n      if (this.options.defaultMenuOrientation === \"top\" && fitsTop) {\n        placement = \"top\";\n      } else if (this.options.defaultMenuOrientation === \"bottom\" && fitsBottom) {\n        placement = \"bottom\";\n      } else {\n        //it doesnt fit either so put it where there's the most space\n        placement = availableSpaceBottom > availableSpaceTop ? \"bottom\" : \"top\";\n      }\n      if (placement === \"bottom\") {\n        topPos = relativeToPos.top + relativeToPos.height;\n        if (!fitsBottom) {\n          //shrink it to fit\n          //3 is a bit of a fudge factor so it doesnt touch the edge of the screen\n          this.mentionContainer.style.height = availableSpaceBottom - 3 + \"px\";\n        }\n        this.options.mentionContainerClass.split(\" \").forEach(function (className) {\n          _this4.mentionContainer.classList.add(\"\".concat(className, \"-bottom\"));\n          _this4.mentionContainer.classList.remove(\"\".concat(className, \"-top\"));\n        });\n      } else {\n        topPos = relativeToPos.top - this.mentionContainer.offsetHeight;\n        if (!fitsTop) {\n          //shrink it to fit\n          //3 is a bit of a fudge factor so it doesnt touch the edge of the screen\n          this.mentionContainer.style.height = availableSpaceTop - 3 + \"px\";\n          topPos = 3;\n        }\n        this.options.mentionContainerClass.split(\" \").forEach(function (className) {\n          _this4.mentionContainer.classList.add(\"\".concat(className, \"-top\"));\n          _this4.mentionContainer.classList.remove(\"\".concat(className, \"-bottom\"));\n        });\n      }\n      this.mentionContainer.style.top = \"\".concat(topPos, \"px\");\n      this.mentionContainer.style.left = \"\".concat(leftPos, \"px\");\n      this.mentionContainer.style.visibility = \"visible\";\n    }\n  }, {\n    key: \"getTextBeforeCursor\",\n    value: function getTextBeforeCursor() {\n      var startPos = Math.max(0, this.cursorPos - this.options.maxChars);\n      var textBeforeCursorPos = this.quill.getText(startPos, this.cursorPos - startPos);\n      return textBeforeCursorPos;\n    }\n  }, {\n    key: \"onSomethingChange\",\n    value: function onSomethingChange() {\n      var _this5 = this;\n      var range = this.quill.getSelection();\n      if (range == null) return;\n      this.cursorPos = range.index;\n      var textBeforeCursor = this.getTextBeforeCursor();\n      var textOffset = Math.max(0, this.cursorPos - this.options.maxChars);\n      var textPrefix = textOffset ? this.quill.getText(textOffset - 1, textOffset) : '';\n      var _getMentionCharIndex = getMentionCharIndex(textBeforeCursor, this.options.mentionDenotationChars, this.options.isolateCharacter, this.options.allowInlineMentionChar),\n        mentionChar = _getMentionCharIndex.mentionChar,\n        mentionCharIndex = _getMentionCharIndex.mentionCharIndex;\n      if (hasValidMentionCharIndex(mentionCharIndex, textBeforeCursor, this.options.isolateCharacter, textPrefix)) {\n        var mentionCharPos = this.cursorPos - (textBeforeCursor.length - mentionCharIndex);\n        this.mentionCharPos = mentionCharPos;\n        var textAfter = textBeforeCursor.substring(mentionCharIndex + mentionChar.length);\n        if (textAfter.length >= this.options.minChars && hasValidChars(textAfter, this.getAllowedCharsRegex(mentionChar))) {\n          if (this.existingSourceExecutionToken) {\n            this.existingSourceExecutionToken.abandoned = true;\n          }\n          this.renderLoading();\n          var sourceRequestToken = {\n            abandoned: false\n          };\n          this.existingSourceExecutionToken = sourceRequestToken;\n          this.options.source(textAfter, function (data, searchTerm) {\n            if (sourceRequestToken.abandoned) {\n              return;\n            }\n            _this5.existingSourceExecutionToken = null;\n            _this5.renderList(mentionChar, data, searchTerm);\n          }, mentionChar);\n        } else {\n          if (this.existingSourceExecutionToken) {\n            this.existingSourceExecutionToken.abandoned = true;\n          }\n          this.hideMentionList();\n        }\n      } else {\n        if (this.existingSourceExecutionToken) {\n          this.existingSourceExecutionToken.abandoned = true;\n        }\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"getAllowedCharsRegex\",\n    value: function getAllowedCharsRegex(denotationChar) {\n      if (this.options.allowedChars instanceof RegExp) {\n        return this.options.allowedChars;\n      } else {\n        return this.options.allowedChars(denotationChar);\n      }\n    }\n  }, {\n    key: \"onTextChange\",\n    value: function onTextChange(delta, oldDelta, source) {\n      if (source === \"user\") {\n        this.onSomethingChange();\n      }\n    }\n  }, {\n    key: \"onSelectionChange\",\n    value: function onSelectionChange(range) {\n      if (range && range.length === 0) {\n        this.onSomethingChange();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"openMenu\",\n    value: function openMenu(denotationChar) {\n      var selection = this.quill.getSelection(true);\n      this.quill.insertText(selection.index, denotationChar);\n      this.quill.blur();\n      this.quill.focus();\n    }\n  }]);\n  return Mention;\n}();\nQuill.register(\"modules/mention\", Mention);\nexport { Mention as default };","map":{"version":3,"names":["Quill","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","prototype","obj","value","_extends","assign","hasOwnProperty","call","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","_superPropBase","property","_get","get","receiver","base","desc","_unsupportedIterableToArray","minLen","_arrayLikeToArray","n","toString","slice","name","Array","from","test","arr","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","isArray","F","s","done","f","normalCompletion","didErr","err","step","next","return","Keys","TAB","ENTER","ESCAPE","UP","DOWN","attachDataValues","element","data","dataAttributes","mention","indexOf","dataset","getMentionCharIndex","text","mentionDenotationChars","isolateChar","allowInlineMentionChar","reduce","prev","mentionChar","mentionCharIndex","regex","RegExp","concat","lastMatch","match","pop","lastIndexOf","hasValidChars","allowedChars","hasValidMentionCharIndex","textPrefix","mentionPrefix","Embed","MentionBlot","_Embed","_super","scroll","node","_this","clickHandler","hoverHandler","mounted","attach","getClickHandler","getHoverHandler","domNode","addEventListener","detach","removeEventListener","_this2","event","buildEvent","window","dispatchEvent","preventDefault","_this3","Event","bubbles","cancelable","denotationChar","document","createElement","className","innerHTML","appendChild","setDataValues","blotName","tagName","register","Mention","quill","options","isOpen","itemIndex","mentionCharPos","cursorPos","values","suspendMouseEnter","existingSourceExecutionToken","renderItem","item","renderLoading","onSelect","insertItem","showDenotationChar","minChars","maxChars","offsetTop","offsetLeft","isolateCharacter","fixMentionsToQuill","positioningStrategy","defaultMenuOrientation","linkTarget","onOpen","onBeforeClose","onClose","listItemClass","mentionContainerClass","mentionListClass","spaceAfterInsert","selectKeys","bind","mentionContainer","style","cssText","onmousemove","onContainerMouseMove","width","mentionList","id","root","setAttribute","on","onTextChange","onSelectionChange","container","setTimeout","range","getSelection","keyboard","addBinding","selectHandler","bindings","unshift","_iterator","_step","selectKey","escapeHandler","upHandler","downHandler","selectItem","abandoned","hideMentionList","prevItem","nextItem","showMentionList","body","visibility","display","scrollTop","setMentionContainerPosition","setIsOpen","remove","removeAttribute","highlightItem","scrollItemInView","undefined","childNodes","classList","disabled","add","itemHeight","offsetHeight","itemPos","containerTop","containerBottom","getItemData","link","hasLinkValue","itemTarget","asyncData","programmaticInsert","overriddenOptions","render","insertAtPos","deleteText","sources","USER","delta","insertEmbed","insertText","setSelection","onItemMouseEnter","index","Number","isNaN","onDisabledItemMouseEnter","onItemClick","button","stopImmediatePropagation","currentTarget","onItemMouseDown","renderedLoading","getElementsByClassName","loadingDiv","append","removeLoading","renderList","searchTerm","initialSelection","li","onmouseenter","onmouseup","onmousedown","increment","newIndex","decrement","containerBottomIsNotVisible","topPos","containerPos","mentionContainerBottom","top","pageYOffset","innerHeight","containerRightIsNotVisible","leftPos","rightPos","offsetWidth","left","browserWidth","pageXOffset","documentElement","clientWidth","setMentionContainerPosition_Fixed","setMentionContainerPosition_Normal","getBoundingClientRect","getBounds","containerHeight","right","containerWidth","quillWidth","overMentionCharPos","height","bottom","_overMentionCharPos","split","_this4","position","mentionCharPosAbsolute","relativeToPos","availableSpaceTop","availableSpaceBottom","clientHeight","fitsBottom","fitsTop","placement","getTextBeforeCursor","startPos","Math","max","textBeforeCursorPos","getText","onSomethingChange","_this5","textBeforeCursor","textOffset","_getMentionCharIndex","textAfter","substring","getAllowedCharsRegex","sourceRequestToken","oldDelta","openMenu","selection","blur","focus","default"],"sources":["/Users/prashant/Desktop/blog/node_modules/quill-mention/dist/quill.mention.esm.js"],"sourcesContent":["import Quill from 'quill';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get.apply(this, arguments);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nvar Keys = {\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  UP: 38,\n  DOWN: 40\n};\n\nfunction attachDataValues(element, data, dataAttributes) {\n  var mention = element;\n  Object.keys(data).forEach(function (key) {\n    if (dataAttributes.indexOf(key) > -1) {\n      mention.dataset[key] = data[key];\n    } else {\n      delete mention.dataset[key];\n    }\n  });\n  return mention;\n}\n\nfunction getMentionCharIndex(text, mentionDenotationChars, isolateChar, allowInlineMentionChar) {\n  return mentionDenotationChars.reduce(function (prev, mentionChar) {\n    var mentionCharIndex;\n\n    if (isolateChar && allowInlineMentionChar) {\n      var regex = new RegExp(\"^\".concat(mentionChar, \"|\\\\s\").concat(mentionChar), 'g');\n      var lastMatch = (text.match(regex) || []).pop();\n\n      if (!lastMatch) {\n        return {\n          mentionChar: prev.mentionChar,\n          mentionCharIndex: prev.mentionCharIndex\n        };\n      }\n\n      mentionCharIndex = lastMatch !== mentionChar ? text.lastIndexOf(lastMatch) + lastMatch.length - mentionChar.length : 0;\n    } else {\n      mentionCharIndex = text.lastIndexOf(mentionChar);\n    }\n\n    if (mentionCharIndex > prev.mentionCharIndex) {\n      return {\n        mentionChar: mentionChar,\n        mentionCharIndex: mentionCharIndex\n      };\n    }\n\n    return {\n      mentionChar: prev.mentionChar,\n      mentionCharIndex: prev.mentionCharIndex\n    };\n  }, {\n    mentionChar: null,\n    mentionCharIndex: -1\n  });\n}\n\nfunction hasValidChars(text, allowedChars) {\n  return allowedChars.test(text);\n}\n\nfunction hasValidMentionCharIndex(mentionCharIndex, text, isolateChar, textPrefix) {\n  if (mentionCharIndex === -1) {\n    return false;\n  }\n\n  if (!isolateChar) {\n    return true;\n  }\n\n  var mentionPrefix = mentionCharIndex ? text[mentionCharIndex - 1] : textPrefix;\n  return !mentionPrefix || !!mentionPrefix.match(/\\s/);\n}\n\nvar Embed = Quill[\"import\"](\"blots/embed\");\n\nvar MentionBlot = /*#__PURE__*/function (_Embed) {\n  _inherits(MentionBlot, _Embed);\n\n  var _super = _createSuper(MentionBlot);\n\n  function MentionBlot(scroll, node) {\n    var _this;\n\n    _classCallCheck(this, MentionBlot);\n\n    _this = _super.call(this, scroll, node);\n\n    _defineProperty(_assertThisInitialized(_this), \"hoverHandler\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"hoverHandler\", void 0);\n\n    _this.clickHandler = null;\n    _this.hoverHandler = null;\n    _this.mounted = false;\n    return _this;\n  }\n\n  _createClass(MentionBlot, [{\n    key: \"attach\",\n    value: function attach() {\n      _get(_getPrototypeOf(MentionBlot.prototype), \"attach\", this).call(this);\n\n      if (!this.mounted) {\n        this.mounted = true;\n        this.clickHandler = this.getClickHandler();\n        this.hoverHandler = this.getHoverHandler();\n        this.domNode.addEventListener(\"click\", this.clickHandler, false);\n        this.domNode.addEventListener(\"mouseenter\", this.hoverHandler, false);\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      _get(_getPrototypeOf(MentionBlot.prototype), \"detach\", this).call(this);\n\n      this.mounted = false;\n\n      if (this.clickHandler) {\n        this.domNode.removeEventListener(\"click\", this.clickHandler);\n        this.clickHandler = null;\n      }\n    }\n  }, {\n    key: \"getClickHandler\",\n    value: function getClickHandler() {\n      var _this2 = this;\n\n      return function (e) {\n        var event = _this2.buildEvent(\"mention-clicked\", e);\n\n        window.dispatchEvent(event);\n        e.preventDefault();\n      };\n    }\n  }, {\n    key: \"getHoverHandler\",\n    value: function getHoverHandler() {\n      var _this3 = this;\n\n      return function (e) {\n        var event = _this3.buildEvent('mention-hovered', e);\n\n        window.dispatchEvent(event);\n        e.preventDefault();\n      };\n    }\n  }, {\n    key: \"buildEvent\",\n    value: function buildEvent(name, e) {\n      var event = new Event(name, {\n        bubbles: true,\n        cancelable: true\n      });\n      event.value = _extends({}, this.domNode.dataset);\n      event.event = e;\n      return event;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(data) {\n      var node = _get(_getPrototypeOf(MentionBlot), \"create\", this).call(this);\n\n      var denotationChar = document.createElement(\"span\");\n      denotationChar.className = \"ql-mention-denotation-char\";\n      denotationChar.innerHTML = data.denotationChar;\n      node.appendChild(denotationChar);\n      node.innerHTML += data.value;\n      return MentionBlot.setDataValues(node, data);\n    }\n  }, {\n    key: \"setDataValues\",\n    value: function setDataValues(element, data) {\n      var domNode = element;\n      Object.keys(data).forEach(function (key) {\n        domNode.dataset[key] = data[key];\n      });\n      return domNode;\n    }\n  }, {\n    key: \"value\",\n    value: function value(domNode) {\n      return domNode.dataset;\n    }\n  }]);\n\n  return MentionBlot;\n}(Embed);\n\nMentionBlot.blotName = \"mention\";\nMentionBlot.tagName = \"span\";\nMentionBlot.className = \"mention\";\nQuill.register(MentionBlot);\n\nvar Mention = /*#__PURE__*/function () {\n  function Mention(quill, options) {\n    var _this = this;\n\n    _classCallCheck(this, Mention);\n\n    this.isOpen = false;\n    this.itemIndex = 0;\n    this.mentionCharPos = null;\n    this.cursorPos = null;\n    this.values = [];\n    this.suspendMouseEnter = false; //this token is an object that may contains one key \"abandoned\", set to\n    //true when the previous source call should be ignored in favor or a\n    //more recent execution.  This token will be null unless a source call\n    //is in progress.\n\n    this.existingSourceExecutionToken = null;\n    this.quill = quill;\n    this.options = {\n      source: null,\n      renderItem: function renderItem(item) {\n        return \"\".concat(item.value);\n      },\n      renderLoading: function renderLoading() {\n        return null;\n      },\n      onSelect: function onSelect(item, insertItem) {\n        insertItem(item);\n      },\n      mentionDenotationChars: [\"@\"],\n      showDenotationChar: true,\n      allowedChars: /^[a-zA-Z0-9_]*$/,\n      minChars: 0,\n      maxChars: 31,\n      offsetTop: 2,\n      offsetLeft: 0,\n      isolateCharacter: false,\n      allowInlineMentionChar: false,\n      fixMentionsToQuill: false,\n      positioningStrategy: \"normal\",\n      defaultMenuOrientation: \"bottom\",\n      blotName: \"mention\",\n      dataAttributes: [\"id\", \"value\", \"denotationChar\", \"link\", \"target\", \"disabled\"],\n      linkTarget: \"_blank\",\n      onOpen: function onOpen() {\n        return true;\n      },\n      onBeforeClose: function onBeforeClose() {\n        return true;\n      },\n      onClose: function onClose() {\n        return true;\n      },\n      // Style options\n      listItemClass: \"ql-mention-list-item\",\n      mentionContainerClass: \"ql-mention-list-container\",\n      mentionListClass: \"ql-mention-list\",\n      spaceAfterInsert: true,\n      selectKeys: [Keys.ENTER]\n    };\n\n    _extends(this.options, options, {\n      dataAttributes: Array.isArray(options.dataAttributes) ? this.options.dataAttributes.concat(options.dataAttributes) : this.options.dataAttributes\n    }); //Bind all option-functions so they have a reasonable context\n\n\n    for (var o in this.options) {\n      if (typeof this.options[o] === 'function') {\n        this.options[o] = this.options[o].bind(this);\n      }\n    } //create mention container\n\n\n    this.mentionContainer = document.createElement(\"div\");\n    this.mentionContainer.className = this.options.mentionContainerClass ? this.options.mentionContainerClass : \"\";\n    this.mentionContainer.style.cssText = \"display: none; position: absolute;\";\n    this.mentionContainer.onmousemove = this.onContainerMouseMove.bind(this);\n\n    if (this.options.fixMentionsToQuill) {\n      this.mentionContainer.style.width = \"auto\";\n    }\n\n    this.mentionList = document.createElement(\"ul\");\n    this.mentionList.id = 'quill-mention-list';\n    quill.root.setAttribute('aria-owns', 'quill-mention-list');\n    this.mentionList.className = this.options.mentionListClass ? this.options.mentionListClass : \"\";\n    this.mentionContainer.appendChild(this.mentionList);\n    quill.on(\"text-change\", this.onTextChange.bind(this));\n    quill.on(\"selection-change\", this.onSelectionChange.bind(this)); //Pasting doesn't fire selection-change after the pasted text is\n    //inserted, so here we manually trigger one\n\n    quill.container.addEventListener(\"paste\", function () {\n      setTimeout(function () {\n        var range = quill.getSelection();\n\n        _this.onSelectionChange(range);\n      });\n    });\n    quill.keyboard.addBinding({\n      key: Keys.TAB\n    }, this.selectHandler.bind(this));\n    quill.keyboard.bindings[Keys.TAB].unshift(quill.keyboard.bindings[Keys.TAB].pop());\n\n    var _iterator = _createForOfIteratorHelper(this.options.selectKeys),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var selectKey = _step.value;\n        quill.keyboard.addBinding({\n          key: selectKey\n        }, this.selectHandler.bind(this));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    quill.keyboard.bindings[Keys.ENTER].unshift(quill.keyboard.bindings[Keys.ENTER].pop());\n    quill.keyboard.addBinding({\n      key: Keys.ESCAPE\n    }, this.escapeHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.UP\n    }, this.upHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.DOWN\n    }, this.downHandler.bind(this));\n  }\n\n  _createClass(Mention, [{\n    key: \"selectHandler\",\n    value: function selectHandler() {\n      if (this.isOpen && !this.existingSourceExecutionToken) {\n        this.selectItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"escapeHandler\",\n    value: function escapeHandler() {\n      if (this.isOpen) {\n        if (this.existingSourceExecutionToken) {\n          this.existingSourceExecutionToken.abandoned = true;\n        }\n\n        this.hideMentionList();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"upHandler\",\n    value: function upHandler() {\n      if (this.isOpen && !this.existingSourceExecutionToken) {\n        this.prevItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"downHandler\",\n    value: function downHandler() {\n      if (this.isOpen && !this.existingSourceExecutionToken) {\n        this.nextItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"showMentionList\",\n    value: function showMentionList() {\n      if (this.options.positioningStrategy === \"fixed\") {\n        document.body.appendChild(this.mentionContainer);\n      } else {\n        this.quill.container.appendChild(this.mentionContainer);\n      }\n\n      this.mentionContainer.style.visibility = \"hidden\";\n      this.mentionContainer.style.display = \"\";\n      this.mentionContainer.scrollTop = 0;\n      this.setMentionContainerPosition();\n      this.setIsOpen(true);\n    }\n  }, {\n    key: \"hideMentionList\",\n    value: function hideMentionList() {\n      this.options.onBeforeClose();\n      this.mentionContainer.style.display = \"none\";\n      this.mentionContainer.remove();\n      this.setIsOpen(false);\n      this.quill.root.removeAttribute('aria-activedescendant');\n    }\n  }, {\n    key: \"highlightItem\",\n    value: function highlightItem() {\n      var scrollItemInView = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      for (var i = 0; i < this.mentionList.childNodes.length; i += 1) {\n        this.mentionList.childNodes[i].classList.remove(\"selected\");\n      }\n\n      if (this.itemIndex === -1 || this.mentionList.childNodes[this.itemIndex].dataset.disabled === \"true\") {\n        return;\n      }\n\n      this.mentionList.childNodes[this.itemIndex].classList.add(\"selected\");\n      this.quill.root.setAttribute('aria-activedescendant', this.mentionList.childNodes[this.itemIndex].id);\n\n      if (scrollItemInView) {\n        var itemHeight = this.mentionList.childNodes[this.itemIndex].offsetHeight;\n        var itemPos = this.mentionList.childNodes[this.itemIndex].offsetTop;\n        var containerTop = this.mentionContainer.scrollTop;\n        var containerBottom = containerTop + this.mentionContainer.offsetHeight;\n\n        if (itemPos < containerTop) {\n          // Scroll up if the item is above the top of the container\n          this.mentionContainer.scrollTop = itemPos;\n        } else if (itemPos > containerBottom - itemHeight) {\n          // scroll down if any part of the element is below the bottom of the container\n          this.mentionContainer.scrollTop += itemPos - containerBottom + itemHeight;\n        }\n      }\n    }\n  }, {\n    key: \"getItemData\",\n    value: function getItemData() {\n      var link = this.mentionList.childNodes[this.itemIndex].dataset.link;\n      var hasLinkValue = typeof link !== \"undefined\";\n      var itemTarget = this.mentionList.childNodes[this.itemIndex].dataset.target;\n\n      if (hasLinkValue) {\n        this.mentionList.childNodes[this.itemIndex].dataset.value = \"<a href=\\\"\".concat(link, \"\\\" target=\").concat(itemTarget || this.options.linkTarget, \">\").concat(this.mentionList.childNodes[this.itemIndex].dataset.value);\n      }\n\n      return this.mentionList.childNodes[this.itemIndex].dataset;\n    }\n  }, {\n    key: \"onContainerMouseMove\",\n    value: function onContainerMouseMove() {\n      this.suspendMouseEnter = false;\n    }\n  }, {\n    key: \"selectItem\",\n    value: function selectItem() {\n      var _this2 = this;\n\n      if (this.itemIndex === -1) {\n        return;\n      }\n\n      var data = this.getItemData();\n\n      if (data.disabled) {\n        return;\n      }\n\n      this.options.onSelect(data, function (asyncData) {\n        var programmaticInsert = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var overriddenOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return _this2.insertItem(asyncData, programmaticInsert, overriddenOptions);\n      });\n      this.hideMentionList();\n    }\n  }, {\n    key: \"insertItem\",\n    value: function insertItem(data, programmaticInsert) {\n      var overriddenOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var render = data;\n\n      if (render === null) {\n        return;\n      }\n\n      var options = _objectSpread2(_objectSpread2({}, this.options), overriddenOptions);\n\n      if (!options.showDenotationChar) {\n        render.denotationChar = \"\";\n      }\n\n      var insertAtPos;\n\n      if (!programmaticInsert) {\n        insertAtPos = this.mentionCharPos;\n        this.quill.deleteText(this.mentionCharPos, this.cursorPos - this.mentionCharPos, Quill.sources.USER);\n      } else {\n        insertAtPos = this.cursorPos;\n      }\n\n      var delta = this.quill.insertEmbed(insertAtPos, options.blotName, render, Quill.sources.USER);\n\n      if (options.spaceAfterInsert) {\n        this.quill.insertText(insertAtPos + 1, \" \", Quill.sources.USER); // setSelection here sets cursor position\n\n        this.quill.setSelection(insertAtPos + 2, Quill.sources.USER);\n      } else {\n        this.quill.setSelection(insertAtPos + 1, Quill.sources.USER);\n      }\n\n      this.hideMentionList();\n      return delta;\n    }\n  }, {\n    key: \"onItemMouseEnter\",\n    value: function onItemMouseEnter(e) {\n      if (this.suspendMouseEnter) {\n        return;\n      }\n\n      var index = Number(e.target.dataset.index);\n\n      if (!Number.isNaN(index) && index !== this.itemIndex) {\n        this.itemIndex = index;\n        this.highlightItem(false);\n      }\n    }\n  }, {\n    key: \"onDisabledItemMouseEnter\",\n    value: function onDisabledItemMouseEnter(e) {\n      if (this.suspendMouseEnter) {\n        return;\n      }\n\n      this.itemIndex = -1;\n      this.highlightItem(false);\n    }\n  }, {\n    key: \"onItemClick\",\n    value: function onItemClick(e) {\n      if (e.button !== 0) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      this.itemIndex = e.currentTarget.dataset.index;\n      this.highlightItem();\n      this.selectItem();\n    }\n  }, {\n    key: \"onItemMouseDown\",\n    value: function onItemMouseDown(e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    }\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      var renderedLoading = this.options.renderLoading();\n\n      if (!renderedLoading) {\n        return;\n      }\n\n      if (this.mentionContainer.getElementsByClassName(\"ql-mention-loading\").length > 0) {\n        this.showMentionList();\n        return;\n      }\n\n      this.mentionList.innerHTML = \"\";\n      var loadingDiv = document.createElement(\"div\");\n      loadingDiv.className = \"ql-mention-loading\";\n      loadingDiv.innerHTML = this.options.renderLoading();\n      this.mentionContainer.append(loadingDiv);\n      this.showMentionList();\n    }\n  }, {\n    key: \"removeLoading\",\n    value: function removeLoading() {\n      var loadingDiv = this.mentionContainer.getElementsByClassName(\"ql-mention-loading\");\n\n      if (loadingDiv.length > 0) {\n        loadingDiv[0].remove();\n      }\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList(mentionChar, data, searchTerm) {\n      if (data && data.length > 0) {\n        this.removeLoading();\n        this.values = data;\n        this.mentionList.innerHTML = \"\";\n        var initialSelection = -1;\n\n        for (var i = 0; i < data.length; i += 1) {\n          var li = document.createElement(\"li\");\n          li.id = 'quill-mention-item-' + i;\n          li.className = this.options.listItemClass ? this.options.listItemClass : \"\";\n\n          if (data[i].disabled) {\n            li.className += \" disabled\";\n            li.setAttribute('aria-hidden', 'true');\n          } else if (initialSelection === -1) {\n            initialSelection = i;\n          }\n\n          li.dataset.index = i;\n          li.innerHTML = this.options.renderItem(data[i], searchTerm);\n\n          if (!data[i].disabled) {\n            li.onmouseenter = this.onItemMouseEnter.bind(this);\n            li.onmouseup = this.onItemClick.bind(this);\n            li.onmousedown = this.onItemMouseDown.bind(this);\n          } else {\n            li.onmouseenter = this.onDisabledItemMouseEnter.bind(this);\n          }\n\n          li.dataset.denotationChar = mentionChar;\n          this.mentionList.appendChild(attachDataValues(li, data[i], this.options.dataAttributes));\n        }\n\n        this.itemIndex = initialSelection;\n        this.highlightItem();\n        this.showMentionList();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"nextItem\",\n    value: function nextItem() {\n      var increment = 0;\n      var newIndex;\n\n      do {\n        increment++;\n        newIndex = (this.itemIndex + increment) % this.values.length;\n        var disabled = this.mentionList.childNodes[newIndex].dataset.disabled === \"true\";\n\n        if (increment === this.values.length + 1) {\n          //we've wrapped around w/o finding an enabled item\n          newIndex = -1;\n          break;\n        }\n      } while (disabled);\n\n      this.itemIndex = newIndex;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"prevItem\",\n    value: function prevItem() {\n      var decrement = 0;\n      var newIndex;\n\n      do {\n        decrement++;\n        newIndex = (this.itemIndex + this.values.length - decrement) % this.values.length;\n        var disabled = this.mentionList.childNodes[newIndex].dataset.disabled === \"true\";\n\n        if (decrement === this.values.length + 1) {\n          //we've wrapped around w/o finding an enabled item\n          newIndex = -1;\n          break;\n        }\n      } while (disabled);\n\n      this.itemIndex = newIndex;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"containerBottomIsNotVisible\",\n    value: function containerBottomIsNotVisible(topPos, containerPos) {\n      var mentionContainerBottom = topPos + this.mentionContainer.offsetHeight + containerPos.top;\n      return mentionContainerBottom > window.pageYOffset + window.innerHeight;\n    }\n  }, {\n    key: \"containerRightIsNotVisible\",\n    value: function containerRightIsNotVisible(leftPos, containerPos) {\n      if (this.options.fixMentionsToQuill) {\n        return false;\n      }\n\n      var rightPos = leftPos + this.mentionContainer.offsetWidth + containerPos.left;\n      var browserWidth = window.pageXOffset + document.documentElement.clientWidth;\n      return rightPos > browserWidth;\n    }\n  }, {\n    key: \"setIsOpen\",\n    value: function setIsOpen(isOpen) {\n      if (this.isOpen !== isOpen) {\n        if (isOpen) {\n          this.options.onOpen();\n        } else {\n          this.options.onClose();\n        }\n\n        this.isOpen = isOpen;\n      }\n    }\n  }, {\n    key: \"setMentionContainerPosition\",\n    value: function setMentionContainerPosition() {\n      if (this.options.positioningStrategy === \"fixed\") {\n        this.setMentionContainerPosition_Fixed();\n      } else {\n        this.setMentionContainerPosition_Normal();\n      }\n    }\n  }, {\n    key: \"setMentionContainerPosition_Normal\",\n    value: function setMentionContainerPosition_Normal() {\n      var _this3 = this;\n\n      var containerPos = this.quill.container.getBoundingClientRect();\n      var mentionCharPos = this.quill.getBounds(this.mentionCharPos);\n      var containerHeight = this.mentionContainer.offsetHeight;\n      var topPos = this.options.offsetTop;\n      var leftPos = this.options.offsetLeft; // handle horizontal positioning\n\n      if (this.options.fixMentionsToQuill) {\n        var rightPos = 0;\n        this.mentionContainer.style.right = \"\".concat(rightPos, \"px\");\n      } else {\n        leftPos += mentionCharPos.left;\n      }\n\n      if (this.containerRightIsNotVisible(leftPos, containerPos)) {\n        var containerWidth = this.mentionContainer.offsetWidth + this.options.offsetLeft;\n        var quillWidth = containerPos.width;\n        leftPos = quillWidth - containerWidth;\n      } // handle vertical positioning\n\n\n      if (this.options.defaultMenuOrientation === \"top\") {\n        // Attempt to align the mention container with the top of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos = -1 * (containerHeight + this.options.offsetTop);\n        } else {\n          topPos = mentionCharPos.top - (containerHeight + this.options.offsetTop);\n        } // default to bottom if the top is not visible\n\n\n        if (topPos + containerPos.top <= 0) {\n          var overMentionCharPos = this.options.offsetTop;\n\n          if (this.options.fixMentionsToQuill) {\n            overMentionCharPos += containerPos.height;\n          } else {\n            overMentionCharPos += mentionCharPos.bottom;\n          }\n\n          topPos = overMentionCharPos;\n        }\n      } else {\n        // Attempt to align the mention container with the bottom of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos += containerPos.height;\n        } else {\n          topPos += mentionCharPos.bottom;\n        } // default to the top if the bottom is not visible\n\n\n        if (this.containerBottomIsNotVisible(topPos, containerPos)) {\n          var _overMentionCharPos = this.options.offsetTop * -1;\n\n          if (!this.options.fixMentionsToQuill) {\n            _overMentionCharPos += mentionCharPos.top;\n          }\n\n          topPos = _overMentionCharPos - containerHeight;\n        }\n      }\n\n      if (topPos >= 0) {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this3.mentionContainer.classList.add(\"\".concat(className, \"-bottom\"));\n\n          _this3.mentionContainer.classList.remove(\"\".concat(className, \"-top\"));\n        });\n      } else {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this3.mentionContainer.classList.add(\"\".concat(className, \"-top\"));\n\n          _this3.mentionContainer.classList.remove(\"\".concat(className, \"-bottom\"));\n        });\n      }\n\n      this.mentionContainer.style.top = \"\".concat(topPos, \"px\");\n      this.mentionContainer.style.left = \"\".concat(leftPos, \"px\");\n      this.mentionContainer.style.visibility = \"visible\";\n    }\n  }, {\n    key: \"setMentionContainerPosition_Fixed\",\n    value: function setMentionContainerPosition_Fixed() {\n      var _this4 = this;\n\n      this.mentionContainer.style.position = \"fixed\";\n      this.mentionContainer.style.height = null;\n      var containerPos = this.quill.container.getBoundingClientRect();\n      var mentionCharPos = this.quill.getBounds(this.mentionCharPos);\n      var mentionCharPosAbsolute = {\n        left: containerPos.left + mentionCharPos.left,\n        top: containerPos.top + mentionCharPos.top,\n        width: 0,\n        height: mentionCharPos.height\n      }; //Which rectangle should it be relative to\n\n      var relativeToPos = this.options.fixMentionsToQuill ? containerPos : mentionCharPosAbsolute;\n      var topPos = this.options.offsetTop;\n      var leftPos = this.options.offsetLeft; // handle horizontal positioning\n\n      if (this.options.fixMentionsToQuill) {\n        var rightPos = relativeToPos.right;\n        this.mentionContainer.style.right = \"\".concat(rightPos, \"px\");\n      } else {\n        leftPos += relativeToPos.left; //if its off the righ edge, push it back\n\n        if (leftPos + this.mentionContainer.offsetWidth > document.documentElement.clientWidth) {\n          leftPos -= leftPos + this.mentionContainer.offsetWidth - document.documentElement.clientWidth;\n        }\n      }\n\n      var availableSpaceTop = relativeToPos.top;\n      var availableSpaceBottom = document.documentElement.clientHeight - (relativeToPos.top + relativeToPos.height);\n      var fitsBottom = this.mentionContainer.offsetHeight <= availableSpaceBottom;\n      var fitsTop = this.mentionContainer.offsetHeight <= availableSpaceTop;\n      var placement;\n\n      if (this.options.defaultMenuOrientation === \"top\" && fitsTop) {\n        placement = \"top\";\n      } else if (this.options.defaultMenuOrientation === \"bottom\" && fitsBottom) {\n        placement = \"bottom\";\n      } else {\n        //it doesnt fit either so put it where there's the most space\n        placement = availableSpaceBottom > availableSpaceTop ? \"bottom\" : \"top\";\n      }\n\n      if (placement === \"bottom\") {\n        topPos = relativeToPos.top + relativeToPos.height;\n\n        if (!fitsBottom) {\n          //shrink it to fit\n          //3 is a bit of a fudge factor so it doesnt touch the edge of the screen\n          this.mentionContainer.style.height = availableSpaceBottom - 3 + \"px\";\n        }\n\n        this.options.mentionContainerClass.split(\" \").forEach(function (className) {\n          _this4.mentionContainer.classList.add(\"\".concat(className, \"-bottom\"));\n\n          _this4.mentionContainer.classList.remove(\"\".concat(className, \"-top\"));\n        });\n      } else {\n        topPos = relativeToPos.top - this.mentionContainer.offsetHeight;\n\n        if (!fitsTop) {\n          //shrink it to fit\n          //3 is a bit of a fudge factor so it doesnt touch the edge of the screen\n          this.mentionContainer.style.height = availableSpaceTop - 3 + \"px\";\n          topPos = 3;\n        }\n\n        this.options.mentionContainerClass.split(\" \").forEach(function (className) {\n          _this4.mentionContainer.classList.add(\"\".concat(className, \"-top\"));\n\n          _this4.mentionContainer.classList.remove(\"\".concat(className, \"-bottom\"));\n        });\n      }\n\n      this.mentionContainer.style.top = \"\".concat(topPos, \"px\");\n      this.mentionContainer.style.left = \"\".concat(leftPos, \"px\");\n      this.mentionContainer.style.visibility = \"visible\";\n    }\n  }, {\n    key: \"getTextBeforeCursor\",\n    value: function getTextBeforeCursor() {\n      var startPos = Math.max(0, this.cursorPos - this.options.maxChars);\n      var textBeforeCursorPos = this.quill.getText(startPos, this.cursorPos - startPos);\n      return textBeforeCursorPos;\n    }\n  }, {\n    key: \"onSomethingChange\",\n    value: function onSomethingChange() {\n      var _this5 = this;\n\n      var range = this.quill.getSelection();\n      if (range == null) return;\n      this.cursorPos = range.index;\n      var textBeforeCursor = this.getTextBeforeCursor();\n      var textOffset = Math.max(0, this.cursorPos - this.options.maxChars);\n      var textPrefix = textOffset ? this.quill.getText(textOffset - 1, textOffset) : '';\n\n      var _getMentionCharIndex = getMentionCharIndex(textBeforeCursor, this.options.mentionDenotationChars, this.options.isolateCharacter, this.options.allowInlineMentionChar),\n          mentionChar = _getMentionCharIndex.mentionChar,\n          mentionCharIndex = _getMentionCharIndex.mentionCharIndex;\n\n      if (hasValidMentionCharIndex(mentionCharIndex, textBeforeCursor, this.options.isolateCharacter, textPrefix)) {\n        var mentionCharPos = this.cursorPos - (textBeforeCursor.length - mentionCharIndex);\n        this.mentionCharPos = mentionCharPos;\n        var textAfter = textBeforeCursor.substring(mentionCharIndex + mentionChar.length);\n\n        if (textAfter.length >= this.options.minChars && hasValidChars(textAfter, this.getAllowedCharsRegex(mentionChar))) {\n          if (this.existingSourceExecutionToken) {\n            this.existingSourceExecutionToken.abandoned = true;\n          }\n\n          this.renderLoading();\n          var sourceRequestToken = {\n            abandoned: false\n          };\n          this.existingSourceExecutionToken = sourceRequestToken;\n          this.options.source(textAfter, function (data, searchTerm) {\n            if (sourceRequestToken.abandoned) {\n              return;\n            }\n\n            _this5.existingSourceExecutionToken = null;\n\n            _this5.renderList(mentionChar, data, searchTerm);\n          }, mentionChar);\n        } else {\n          if (this.existingSourceExecutionToken) {\n            this.existingSourceExecutionToken.abandoned = true;\n          }\n\n          this.hideMentionList();\n        }\n      } else {\n        if (this.existingSourceExecutionToken) {\n          this.existingSourceExecutionToken.abandoned = true;\n        }\n\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"getAllowedCharsRegex\",\n    value: function getAllowedCharsRegex(denotationChar) {\n      if (this.options.allowedChars instanceof RegExp) {\n        return this.options.allowedChars;\n      } else {\n        return this.options.allowedChars(denotationChar);\n      }\n    }\n  }, {\n    key: \"onTextChange\",\n    value: function onTextChange(delta, oldDelta, source) {\n      if (source === \"user\") {\n        this.onSomethingChange();\n      }\n    }\n  }, {\n    key: \"onSelectionChange\",\n    value: function onSelectionChange(range) {\n      if (range && range.length === 0) {\n        this.onSomethingChange();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"openMenu\",\n    value: function openMenu(denotationChar) {\n      var selection = this.quill.getSelection(true);\n      this.quill.insertText(selection.index, denotationChar);\n      this.quill.blur();\n      this.quill.focus();\n    }\n  }]);\n\n  return Mention;\n}();\n\nQuill.register(\"modules/mention\", Mention);\n\nexport { Mention as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}